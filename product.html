<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhone 15 Pro - TechStore</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Jitsu Analytics Integration -->
    <script async src="http://localhost:8080/p.js" data-write-key="Fh5eSyhNFHjbuoAw4c6sWac4DCbVNECy:RsFGJZNjb7LOa9eMYy7miTC1xPmLM076"></script>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <a href="index.html" class="text-2xl font-bold text-purple-600">TechStore</a>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <a href="index.html" class="text-gray-500 hover:text-purple-600 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                        <a href="index.html#products" class="text-gray-900 hover:text-purple-600 px-3 py-2 rounded-md text-sm font-medium">Products</a>
                        <a href="#" class="text-gray-500 hover:text-purple-600 px-3 py-2 rounded-md text-sm font-medium">Categories</a>
                        <a href="#" class="text-gray-500 hover:text-purple-600 px-3 py-2 rounded-md text-sm font-medium">About</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="text-gray-500 hover:text-purple-600">
                        <i class="fas fa-search text-xl"></i>
                    </button>
                    <button class="text-gray-500 hover:text-purple-600">
                        <i class="fas fa-user text-xl"></i>
                    </button>
                    <button id="cart-btn" class="text-gray-500 hover:text-purple-600 relative">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-purple-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center">0</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="pt-20 pb-4 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <nav class="text-sm">
                <a href="index.html" class="text-purple-600 hover:text-purple-800">Home</a>
                <span class="mx-2 text-gray-500">/</span>
                <a href="index.html#products" class="text-purple-600 hover:text-purple-800">Products</a>
                <span class="mx-2 text-gray-500">/</span>
                <a href="#" class="text-purple-600 hover:text-purple-800">Smartphones</a>
                <span class="mx-2 text-gray-500">/</span>
                <span class="text-gray-900">iPhone 15 Pro</span>
            </nav>
        </div>
    </div>

    <!-- Product Section -->
    <section class="py-8 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Product Images -->
                <div class="space-y-4">
                    <div class="aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden">
                        <img id="main-image" src="https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=600&h=600&fit=crop&crop=center" 
                             alt="iPhone 15 Pro" class="w-full h-full object-cover">
                    </div>
                    <div class="grid grid-cols-4 gap-4">
                        <button onclick="changeImage('https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=600&h=600&fit=crop&crop=center')" 
                                class="aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden border-2 border-purple-600">
                            <img src="https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=150&h=150&fit=crop&crop=center" alt="iPhone 15 Pro" class="w-full h-full object-cover">
                        </button>
                        <button onclick="changeImage('https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=600&h=600&fit=crop&crop=center')" 
                                class="aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden border-2 border-transparent hover:border-purple-600">
                            <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=150&h=150&fit=crop&crop=center" alt="iPhone 15 Pro Side" class="w-full h-full object-cover">
                        </button>
                        <button onclick="changeImage('https://images.unsplash.com/photo-1574944985070-8f3ebc6b79d2?w=600&h=600&fit=crop&crop=center')" 
                                class="aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden border-2 border-transparent hover:border-purple-600">
                            <img src="https://images.unsplash.com/photo-1574944985070-8f3ebc6b79d2?w=150&h=150&fit=crop&crop=center" alt="iPhone 15 Pro Back" class="w-full h-full object-cover">
                        </button>
                        <button onclick="changeImage('https://images.unsplash.com/photo-1567721913486-6585f069b332?w=600&h=600&fit=crop&crop=center')" 
                                class="aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden border-2 border-transparent hover:border-purple-600">
                            <img src="https://images.unsplash.com/photo-1567721913486-6585f069b332?w=150&h=150&fit=crop&crop=center" alt="iPhone 15 Pro Detail" class="w-full h-full object-cover">
                        </button>
                    </div>
                </div>

                <!-- Product Info -->
                <div class="space-y-6">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-4">iPhone 15 Pro</h1>
                        <div class="flex items-center mb-4">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-gray-600 ml-2">(4.8/5)</span>
                            <span class="text-gray-500 ml-2">1,234 reviews</span>
                        </div>
                        <p class="text-2xl font-bold text-purple-600 mb-4">$999.00</p>
                        <div class="flex items-center space-x-2 mb-4">
                            <span class="bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">âœ“ In Stock</span>
                            <span class="text-gray-600">Ships within 2-3 days</span>
                        </div>
                    </div>

                    <!-- Product Description -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Description</h3>
                        <p class="text-gray-600 mb-4">
                            The iPhone 15 Pro features a stunning titanium design with the most advanced iPhone camera system ever. 
                            Powered by the A17 Pro chip with 6-core GPU, it delivers exceptional performance for everything you do.
                        </p>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> 6.1-inch Super Retina XDR display</li>
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> A17 Pro chip with 6-core GPU</li>
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Pro camera system (48MP Main)</li>
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Titanium design with action button</li>
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> USB-C connector</li>
                        </ul>
                    </div>

                    <!-- Color Selection -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Color</h3>
                        <div class="flex space-x-3">
                            <button onclick="selectColor('Natural Titanium')" class="w-12 h-12 rounded-full bg-gray-300 border-2 border-purple-600 focus:outline-none"></button>
                            <button onclick="selectColor('Blue Titanium')" class="w-12 h-12 rounded-full bg-blue-600 border-2 border-transparent hover:border-purple-600 focus:outline-none"></button>
                            <button onclick="selectColor('White Titanium')" class="w-12 h-12 rounded-full bg-gray-100 border-2 border-transparent hover:border-purple-600 focus:outline-none"></button>
                            <button onclick="selectColor('Black Titanium')" class="w-12 h-12 rounded-full bg-gray-900 border-2 border-transparent hover:border-purple-600 focus:outline-none"></button>
                        </div>
                        <p class="text-gray-600 mt-2">Selected: <span id="selected-color">Natural Titanium</span></p>
                    </div>

                    <!-- Storage Selection -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Storage</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectStorage('128GB', 999)" class="border-2 border-purple-600 bg-purple-50 text-purple-600 py-3 px-4 rounded-lg text-center font-semibold">
                                128GB<br><span class="text-sm">$999</span>
                            </button>
                            <button onclick="selectStorage('256GB', 1099)" class="border-2 border-gray-300 text-gray-700 py-3 px-4 rounded-lg text-center font-semibold hover:border-purple-600">
                                256GB<br><span class="text-sm">$1,099</span>
                            </button>
                            <button onclick="selectStorage('512GB', 1299)" class="border-2 border-gray-300 text-gray-700 py-3 px-4 rounded-lg text-center font-semibold hover:border-purple-600">
                                512GB<br><span class="text-sm">$1,299</span>
                            </button>
                            <button onclick="selectStorage('1TB', 1499)" class="border-2 border-gray-300 text-gray-700 py-3 px-4 rounded-lg text-center font-semibold hover:border-purple-600">
                                1TB<br><span class="text-sm">$1,499</span>
                            </button>
                        </div>
                    </div>

                    <!-- Quantity and Add to Cart -->
                    <div class="border-t pt-6">
                        <div class="flex items-center space-x-4 mb-6">
                            <div class="flex items-center space-x-2">
                                <label class="text-gray-700 font-semibold">Quantity:</label>
                                <div class="flex items-center border rounded-lg">
                                    <button onclick="updateQuantity(-1)" class="px-3 py-2 hover:bg-gray-100">-</button>
                                    <span id="quantity" class="px-4 py-2 font-semibold">1</span>
                                    <button onclick="updateQuantity(1)" class="px-3 py-2 hover:bg-gray-100">+</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            <button onclick="addToCartFromProduct()" class="w-full bg-purple-600 text-white py-4 px-6 rounded-lg font-bold text-lg hover:bg-purple-700 transition duration-300">
                                Add to Cart - $<span id="total-price">999</span>
                            </button>
                            <button onclick="buyNow()" class="w-full border-2 border-purple-600 text-purple-600 py-4 px-6 rounded-lg font-bold text-lg hover:bg-purple-50 transition duration-300">
                                Buy Now
                            </button>
                        </div>
                    </div>

                    <!-- Wishlist and Share -->
                    <div class="border-t pt-6">
                        <div class="flex space-x-4">
                            <button onclick="addToWishlist()" class="flex items-center text-gray-600 hover:text-purple-600">
                                <i class="far fa-heart mr-2"></i> Add to Wishlist
                            </button>
                            <button onclick="shareProduct()" class="flex items-center text-gray-600 hover:text-purple-600">
                                <i class="fas fa-share mr-2"></i> Share
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Related Products -->
    <section class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-gray-900 text-center mb-12">Related Products</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" id="related-products">
                <!-- Related products will be loaded here -->
            </div>
        </div>
    </section>

    <script>
        // Current product data
        const currentProduct = {
            id: 1,
            name: "iPhone 15 Pro",
            basePrice: 999,
            category: "smartphones",
            brand: "Apple",
            color: "Natural Titanium",
            storage: "128GB",
            quantity: 1
        };

        let currentPrice = currentProduct.basePrice;

        // Track page view for product
        function trackProductPageView() {
            if (window.jitsu) {
                const productData = {
                    page_type: 'product',
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    product_category: currentProduct.category,
                    product_price: currentPrice,
                    product_brand: currentProduct.brand
                };
                
                window.jitsu.page(productData);
                window.jitsu.track('Product Page Viewed', {
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    product_category: currentProduct.category,
                    product_price: currentPrice,
                    timestamp: new Date().toISOString()
                });
            }
        }

        // Change product image
        function changeImage(src) {
            document.getElementById('main-image').src = src;
            
            // Track image interaction
            if (window.jitsu) {
                window.jitsu.track('Product Image Changed', {
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    image_src: src,
                    timestamp: new Date().toISOString()
                });
            }
        }

        // Select color
        function selectColor(color) {
            currentProduct.color = color;
            document.getElementById('selected-color').textContent = color;
            
            // Update button states
            document.querySelectorAll('[onclick^="selectColor"]').forEach(btn => {
                btn.classList.remove('border-purple-600');
                btn.classList.add('border-transparent');
            });
            event.target.classList.add('border-purple-600');
            event.target.classList.remove('border-transparent');
            
            // Track color selection
            if (window.jitsu) {
                window.jitsu.track('Product Color Selected', {
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    selected_color: color,
                    timestamp: new Date().toISOString()
                });
            }
        }

        // Select storage
        function selectStorage(storage, price) {
            currentProduct.storage = storage;
            currentPrice = price;
            updateTotalPrice();
            
            // Update button states
            document.querySelectorAll('[onclick^="selectStorage"]').forEach(btn => {
                btn.classList.remove('border-purple-600', 'bg-purple-50', 'text-purple-600');
                btn.classList.add('border-gray-300', 'text-gray-700');
            });
            event.target.classList.add('border-purple-600', 'bg-purple-50', 'text-purple-600');
            event.target.classList.remove('border-gray-300', 'text-gray-700');
            
            // Track storage selection
            if (window.jitsu) {
                window.jitsu.track('Product Storage Selected', {
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    selected_storage: storage,
                    price_change: price,
                    timestamp: new Date().toISOString()
                });
            }
        }

        // Update quantity
        function updateQuantity(change) {
            const newQuantity = Math.max(1, currentProduct.quantity + change);
            currentProduct.quantity = newQuantity;
            document.getElementById('quantity').textContent = newQuantity;
            updateTotalPrice();
        }

        // Update total price
        function updateTotalPrice() {
            const total = currentPrice * currentProduct.quantity;
            document.getElementById('total-price').textContent = total;
        }

        // Add to cart from product page
        function addToCartFromProduct() {
            const productToAdd = {
                id: currentProduct.id,
                name: `${currentProduct.name} (${currentProduct.storage}, ${currentProduct.color})`,
                price: currentPrice,
                image: document.getElementById('main-image').src,
                category: currentProduct.category,
                brand: currentProduct.brand,
                color: currentProduct.color,
                storage: currentProduct.storage,
                quantity: currentProduct.quantity
            };

            // Track add to cart
            if (window.jitsu) {
                window.jitsu.track('Product Added to Cart', {
                    event_category: 'ecommerce',
                    event_action: 'add_to_cart',
                    product_id: productToAdd.id,
                    product_name: productToAdd.name,
                    product_category: productToAdd.category,
                    product_price: productToAdd.price,
                    quantity: productToAdd.quantity,
                    total_value: productToAdd.price * productToAdd.quantity,
                    variant_color: productToAdd.color,
                    variant_storage: productToAdd.storage,
                    timestamp: new Date().toISOString()
                });
            }

            alert(`Added ${productToAdd.name} to cart!\nQuantity: ${productToAdd.quantity}\nTotal: $${productToAdd.price * productToAdd.quantity}`);
        }

        // Buy now
        function buyNow() {
            addToCartFromProduct();
            
            // Track immediate checkout intent
            if (window.jitsu) {
                window.jitsu.track('Buy Now Clicked', {
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    product_price: currentPrice,
                    quantity: currentProduct.quantity,
                    total_value: currentPrice * currentProduct.quantity,
                    timestamp: new Date().toISOString()
                });
            }
            
            // Redirect to checkout (simulated)
            alert('Redirecting to checkout...');
        }

        // Add to wishlist
        function addToWishlist() {
            if (window.jitsu) {
                window.jitsu.track('Product Added to Wishlist', {
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    product_category: currentProduct.category,
                    product_price: currentPrice,
                    timestamp: new Date().toISOString()
                });
            }
            
            alert('Added to wishlist!');
        }

        // Share product
        function shareProduct() {
            if (window.jitsu) {
                window.jitsu.track('Product Shared', {
                    product_id: currentProduct.id,
                    product_name: currentProduct.name,
                    share_method: 'native', // Could be 'facebook', 'twitter', etc.
                    timestamp: new Date().toISOString()
                });
            }
            
            if (navigator.share) {
                navigator.share({
                    title: currentProduct.name,
                    text: `Check out this ${currentProduct.name} for $${currentPrice}`,
                    url: window.location.href
                });
            } else {
                alert('Sharing feature not supported on this device');
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            trackProductPageView();
        });
    </script>
    
    <script src="js/analytics.js"></script>
</body>
</html> 